## Лицензия

Данный проект распространяется под лицензией **ЛЕВИ** (Личная Экспериментальная Вольная Инициатива) версии 1.0.

Полный текст лицензии доступен в файле [LICENSE](LICENSE.MD).

**Важные ограничения:**
- Использование только в некоммерческих целях
- Обязательное предложение изменений через pull request
- Отказ от ответственности за качество оформления отчетов
- Проект создан исключительно в личных целях автора

Использование данного программного обеспечения означает полное принятие условий лицензии ЛЕВИ.

# Кратко об использовании

pdf-synctex поддерживается только пдфлатехом от MikTeX, у техлайва нет флага для компиляции исходников из другой папки.

запустить скрипт init_script.sh из папки, куда необходимо вставить папку report, либо непосредственно из папки report. В src будут положены шаблоны для отчета, в scripts -- скрипты автоматизации. при наличии файлов в src заменены они не будут.

# Руководство по использованию системы генерации таблиц и графиков

## Генерация таблиц

### Подготовка CSV-файла

Создайте CSV-файл с метаданными в начале:

```csv
#caption: Заголовок таблицы
#label: название_таблицы
#header_max_length: 15
Заголовок 1,Заголовок 2,Заголовок 3
Данные 1,Данные 2,Данные 3
```

### Генерация LaTeX-таблицы

```bash
python generate_table.py input.csv output.tex
```

### Вставка таблицы в LaTeX

```latex
\input{output}
```

При использовании с мейкфайлом, таблица вставится автоматически при
```latex
\input{tables/table}
```
где table -- название csv файла.

## Генерация графиков

# Инструкция по использованию generate_plot.py

## Общее описание
Этот скрипт генерирует профессиональные графики из CSV-файлов с поддержкой:
- Различных режимов отображения серий данных
- Кастомизации маркеров для каждой серии
- Аппроксимации данных плавными кривыми
- Гибкой настройки внешнего вида через метаданные

## Формат вызова
```bash
python generate_plot.py <входной.csv> <выходной.pdf>
```

## Структура CSV-файла
CSV-файл должен содержать:
1. **Метаданные** в начале файла (строки, начинающиеся с `#`)
2. **Заголовки колонок** (первая строка данных)
3. **Данные** (последующие строки)

Пример структуры:
```csv
#xcol: Время
#ycol: Значение
#title: Пример графика
Время,Значение,Группа
1,10,A
2,15,A
1,12,B
2,18,B
```

---

## Поддерживаемые метаданные

### Базовые параметры
| Метаданные | Обязательность | Описание |
|------------|----------------|----------|
| `#xcol` | Обязательно | Название колонки для оси X |
| `#ycol` | Обязательно (кроме `#mode: multi_column`) | Название колонки для оси Y |
| `#title` | Опционально | Заголовок графика |
| `#xlabel` | Опционально | Подпись оси X (по умолчанию — название колонки) |
| `#ylabel` | Опционально | Подпись оси Y (по умолчанию — название колонки) |

### Режимы работы
Выберите **только один** из режимов:

#### 1. Стандартный режим с группировкой
```csv
#series: <название_колонки>
```
- Данные группируются по уникальным значениям в указанной колонке
- Каждая группа отображается отдельной серией
- Требует указания `#xcol` и `#ycol`

#### 2. Режим multi_column (рекомендуется для таблиц типа Value, Time_alg1, Time_alg2)
```csv
#mode: multi_column
```
- Каждая колонка (кроме `#xcol`) становится отдельной серией
- Не требует `#ycol`
- Автоматически определяет серии по всем колонкам кроме `#xcol`

### Кастомизация серий
| Метаданные | Формат | Описание |
|------------|--------|----------|
| `#series_labels` | `Колонка1:Метка1; Колонка2:Метка2`<br>или<br>`Метка1; Метка2` | Замена названий серий в легенде |
| `#series_markers` | `Колонка1:s; Колонка2:^`<br>или<br>`o; D; p` | Задание маркеров для серий |
| `#approximation` | `linear`<br>`polynomial:<степень>`<br>`spline:<сглаживание>`<br>`none` | Тип аппроксимации линий |

#### Доступные маркеры:
- `o` — круг
- `s` — квадрат
- `^` — треугольник вверх
- `v` — треугольник вниз
- `D` — ромб
- `p` — пятиугольник
- `*` — звезда
- `X` — крест
- `P` — плюс
- `h` — шестиугольник

### Параметры аппроксимации
| Тип | Синтаксис | Особенности |
|-----|-----------|-------------|
| Линейная | `#approximation: linear` | Прямая линия через точки |
| Полиномиальная | `#approximation: polynomial:3` | Степень полинома (по умолчанию 2) |
| Сплайн | `#approximation: spline:0.5` | Параметр сглаживания 0.0-1.0 (по умолчанию 0.5) |
| Без аппроксимации | `#approximation: none` | Кусочно-линейная функция (по умолчанию) |

---

## Примеры использования

### Пример 1: Сравнение двух алгоритмов (режим multi_column)
```csv
#mode: multi_column
#xcol: Размер данных
#series_labels: "Алгоритм 1":Быстрый; "Алгоритм 2":Точный
#series_markers: "Алгоритм 1":s; "Алгоритм 2":^
#approximation: polynomial:2
#title: Сравнение производительности
#xlabel: Количество элементов
#ylabel: Время выполнения (мс)

Размер данных,Алгоритм 1,Алгоритм 2
100,12.5,25.3
200,28.7,38.1
300,52.4,55.6
400,84.2,78.9
500,125.8,108.3
```

### Пример 2: Группировка по версиям (стандартный режим)
```csv
#xcol: Эпоха
#ycol: Точность
#series: Версия
#series_labels: v1.0:Базовая; v2.1:Оптимизированная
#series_markers: v1.0:o; v2.1:D
#approximation: spline:0.3
#title: Обучение нейросети
#xlabel: Номер эпохи
#ylabel: Точность (%)

Эпоха,Точность,Версия
1,65.2,v1.0
2,72.8,v1.0
3,78.5,v1.0
1,68.5,v2.1
2,76.3,v2.1
3,83.7,v2.1
```

### Пример 3: Простой график с линейной аппроксимацией
```csv
#xcol: Температура
#ycol: Сопротивление
#approximation: linear
#title: Калибровочная зависимость
#xlabel: Температура (°C)
#ylabel: Сопротивление (Ом)

Температура,Сопротивление
20,100.5
30,103.8
40,107.2
50,110.5
60,113.9
```

## Особенности использования

### Работа с пробелами в названиях
Для названий колонок, содержащих пробелы или специальные символы:
- Используйте кавычки в метаданных:
  ```csv
  #series_labels: "Время выполнения":Время; "Потребление памяти":Память
  ```
- В данных кавычки ставить не нужно:
  ```csv
  Время выполнения,Потребление памяти,Алгоритм
  12.5,45.2,Быстрый
  ```

### Требования к данным
1. Все значения в колонках X и Y должны быть числовыми
2. Для полиномиальной аппроксимации степени N требуется минимум N+1 точек
3. Для сплайн-аппроксимации требуется минимум 4 точки

### Зависимости
Установите необходимые пакеты:
```bash
pip install matplotlib numpy scipy
```
- `scipy` требуется только для сплайн-аппроксимации (при её отсутствии будет использоваться полином)

### Вставка графика в LaTeX

```latex
\includegraphics[width=\textwidth]{output.pdf}
```
Автоматически соберется, если есть .csv файл в tables с тем же названием
## Стилистические проверки (lint_tex)

### Комментарии #TODO

В LaTeX-файлах можно оставлять комментарии вида `#TODO`, которые будут зафиксированы системой проверки:

```latex
% #TODO Добавить больше данных
```

При проверке такие комментарии будут выведены как предупреждения.

### Проверка и исправление пунктуации в списках

Система проверяет списки (itemize/enumerate) на правильность использования знаков препинания:

- Если текст перед списком заканчивается двоеточием, элементы списков начинаются со строчной буквы и заканчиваются точкой (последний элемент) или точкой с запятой (остальные)
- Если текст перед списком не заканчивается двоеточием, элементы начинаются с заглавной буквы и заканчиваются точкой
- Также исправляются окончания предложений перед списками (двоеточие меняется на точку, если в списке нет двоеточия)

Для исключения строки из проверки можно использовать комментарий:

```latex
% #lint-ignore
```

# PLANTUML
При наличии .plantuml файлов в папке src/images/plantuml

Зависимости:
установлены на компьютере `plantuml` для создания диаграмм, `inkscape` для перевода свг в пдф.

Не стоит указывать в заголовке после @plantuml название диаграммы
Пдф диаграммы создастся с тем же названием, что и .plantuml файл